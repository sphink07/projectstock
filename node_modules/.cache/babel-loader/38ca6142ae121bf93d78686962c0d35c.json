{"ast":null,"code":"import Swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      Mixlist: [],\n      textinput: [],\n      textinputfix: [],\n      ListShow: [],\n      headers: [{\n        text: \"Category\",\n        align: \"start\",\n        sortable: false,\n        value: \"Category\"\n      }, {\n        text: \"PartNo\",\n        value: \"PartNo\"\n      }, {\n        text: \"Value\",\n        value: \"Value\"\n      }, {\n        text: \"quantity\",\n        value: \"quantity\"\n      }, {\n        text: \"\",\n        value: \"action\"\n      }],\n      rules: [value => !!value || \"กรอกจำนวนให้ครบถ้วน.\"]\n    };\n  },\n\n  components: {},\n\n  mounted() {\n    let JsonData = JSON.parse(localStorage.getItem(\"Iteminlist\"));\n    this.ListShow = JsonData;\n  },\n\n  methods: {\n    TestSlot() {\n      this.textinputfix = this.textinput.filter(function (e) {\n        return e;\n      });\n\n      if (this.textinputfix.length == this.ListShow.length) {\n        for (let i = 0; i < this.textinputfix.length; i++) {\n          if (this.ListShow[i].qty >= this.textinputfix[i]) {\n            this.Mixlist[i] = this.ListShow[i].qty - this.textinputfix[i];\n          } else {\n            Swal.fire({\n              text: \"มีรายการสินค้าที่ไม่เพียงพอ ตรวจสอบจำนวนที่จะเบิก1\",\n              icon: \"warning\",\n              showConfirmButton: false,\n              timer: 2000\n            });\n            break;\n          }\n        }\n\n        if (this.Mixlist.length == this.ListShow.length) {\n          Swal.fire({\n            title: \"ยืนยันรายการ\",\n            text: \"ต้องการที่จะเบิกตามรายการที่เลือก?\",\n            icon: \"warning\",\n            showCancelButton: true,\n            confirmButtonColor: \"#01ba03\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: \"ตกลง\",\n            cancelButtonText: \"ยกเลิก\"\n          }).then(result => {\n            if (result.isConfirmed) {\n              Swal.fire({\n                title: \"บันทึกสำเร็จ\",\n                icon: \"success\",\n                timer: 2000,\n                showConfirmButton: false\n              });\n\n              for (let i = 0; i < this.textinputfix.length; i++) {\n                let id = this.ListShow[i].id;\n                let quantity = this.Mixlist[i];\n                this.axios.post(\"https://adventurous-shorts-cow.cyclic.app/updateqty\", {\n                  id,\n                  quantity\n                }).then(() => {\n                  let Category = this.ListShow[i].id;\n                  let PartNo = this.ListShow[i].id;\n                  let Value = this.ListShow[i].id;\n                  let quantity = this.Mixlist[i];\n                  let user = localStorage.getItem(\"UserAdmin\");\n                  this.axios.post(\"https://adventurous-shorts-cow.cyclic.app/insertuser\", {\n                    Category,\n                    PartNo,\n                    Value,\n                    quantity,\n                    user\n                  }).catch(function (error) {\n                    document.write(\"ส่งข้อมูลไม่สำเร็จ\" + \"<br>\" + \"สาเหตุ :\" + error);\n                  });\n                }).catch(function (error) {\n                  document.write(\"ส่งข้อมูลไม่สำเร็จ\" + \"<br>\" + \"สาเหตุ :\" + error);\n                });\n              }\n\n              Swal.fire({\n                title: \"บันทึกสำเร็จ\",\n                icon: \"success\",\n                timer: 2000,\n                showConfirmButton: false\n              });\n              this.$router.push(\"/select\");\n            } else {\n              this.Mixlist = [];\n              console.log(this.Mixlist);\n            }\n          });\n        } else {\n          Swal.fire({\n            text: \"มีรายการสินค้าที่ไม่เพียงพอ ตรวจสอบจำนวนที่จะเบิก2\",\n            icon: \"warning\",\n            showConfirmButton: false,\n            timer: 2000\n          });\n          console.log(this.Mixlist);\n          console.log(this.ListShow.length);\n        }\n      } else {\n        Swal.fire({\n          text: \"มีรายการที่ยังกรอกจำนวนไม่ครบ\",\n          icon: \"warning\",\n          showConfirmButton: false,\n          timer: 1800\n        });\n      }\n\n      if (this.ListShow.length <= 0) {\n        Swal.fire({\n          text: \"ไม่มีข้อมูลทำการเลือกข้อมูลก่อน\",\n          icon: \"warning\",\n          showConfirmButton: false,\n          timer: 1800\n        });\n        this.$router.push(\"/select\");\n      }\n\n      console.log(this.ListShow);\n    },\n\n    backpage() {\n      this.$router.push(\"/select\");\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqFA;AACA;EACAA;IACA;MACAC,WADA;MAEAC,aAFA;MAGAC,gBAHA;MAIAC,YAJA;MAKAC,UACA;QACAC,gBADA;QAEAC,cAFA;QAGAC,eAHA;QAIAC;MAJA,CADA,EAOA;QAAAH;QAAAG;MAAA,CAPA,EAQA;QAAAH;QAAAG;MAAA,CARA,EASA;QAAAH;QAAAG;MAAA,CATA,EAUA;QAAAH;QAAAG;MAAA,CAVA,CALA;MAiBAC;IAjBA;EAmBA,CArBA;;EAsBAC,cAtBA;;EAuBAC;IACA;IACA;EACA,CA1BA;;EA2BAC;IACAC;MACA;QACA;MACA,CAFA;;MAGA;QACA;UACA;YACA;UACA,CAFA,MAEA;YACAC;cACAT,0DADA;cAEAU,eAFA;cAGAC,wBAHA;cAIAC;YAJA;YAMA;UACA;QACA;;QACA;UACAH;YACAI,qBADA;YAEAb,0CAFA;YAGAU,eAHA;YAIAI,sBAJA;YAKAC,6BALA;YAMAC,yBANA;YAOAC,yBAPA;YAQAC;UARA,GASAC,IATA,CASAC;YACA;cACAX;gBACAI,qBADA;gBAEAH,eAFA;gBAGAE,WAHA;gBAIAD;cAJA;;cAMA;gBACA;gBACA;gBACA,WACAU,IADA,CACA,qDADA,EACA;kBAAAC;kBAAAC;gBAAA,CADA,EAEAJ,IAFA,CAEA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA,wEACA;oBAAAK;oBAAAC;oBAAAC;oBAAAH;oBAAAI;kBAAA,CADA,EAEAC,KAFA,CAEA;oBACAC,eACA,kDADA;kBAGA,CANA;gBAOA,CAfA,EAgBAD,KAhBA,CAgBA;kBACAC,eACA,kDADA;gBAGA,CApBA;cAqBA;;cACApB;gBACAI,qBADA;gBAEAH,eAFA;gBAGAE,WAHA;gBAIAD;cAJA;cAMA;YACA,CAvCA,MAuCA;cACA;cACAmB;YACA;UACA,CArDA;QAsDA,CAvDA,MAuDA;UACArB;YACAT,0DADA;YAEAU,eAFA;YAGAC,wBAHA;YAIAC;UAJA;UAMAkB;UACAA;QACA;MACA,CA/EA,MA+EA;QACArB;UACAT,qCADA;UAEAU,eAFA;UAGAC,wBAHA;UAIAC;QAJA;MAMA;;MACA;QACAH;UACAT,uCADA;UAEAU,eAFA;UAGAC,wBAHA;UAIAC;QAJA;QAMA;MACA;;MACAkB;IACA,CAtGA;;IAuGAC;MACA;IACA;;EAzGA;AA3BA","names":["data","Mixlist","textinput","textinputfix","ListShow","headers","text","align","sortable","value","rules","components","mounted","methods","TestSlot","Swal","icon","showConfirmButton","timer","title","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","post","id","quantity","Category","PartNo","Value","user","catch","document","console","backpage"],"sourceRoot":"src/views","sources":["SelectList.vue"],"sourcesContent":["    <template>\r\n  <div>\r\n    <v-app class=\"cbm\">\r\n      <v-row no-gutters\r\n        ><v-container>\r\n          <v-col\r\n            md=\"10\"\r\n            offset-md=\"1\"\r\n            sm=\"10\"\r\n            offset-sm=\"1\"\r\n            style=\"text-align: center\"\r\n          >\r\n            <v-card height=\"700\" elevation=\"5\">\r\n              <v-data-table\r\n                height=\"85vh\"\r\n                flat\r\n                :headers=\"headers\"\r\n                :items=\"ListShow\"\r\n                hide-default-footer\r\n                ><template v-slot:[`item.action`]=\"{ item }\">\r\n                  <td style=\"width: 180px\">\r\n                    <v-text-field\r\n                      v-model=\"textinput[item.id]\"\r\n                      :rules=\"rules\"\r\n                      class=\"mt-7\"\r\n                      solo\r\n                      type=\"number\"\r\n                      single-line\r\n                      label=\"0\"\r\n                      min=\"1\"\r\n                      outlined\r\n                    >\r\n                    </v-text-field>\r\n                  </td>\r\n                </template>\r\n              </v-data-table>\r\n            </v-card>\r\n            <v-col>\r\n              <v-container>\r\n                <v-btn\r\n                  @click=\"backpage()\"\r\n                  class=\"my-8 mr-8 hidden-sm-and-down\"\r\n                  height=\"40\"\r\n                  width=\"250\"\r\n                  style=\"background-color: #d3d3d3\"\r\n                >\r\n                  back\r\n                </v-btn>\r\n                <v-btn\r\n                  @click=\"TestSlot()\"\r\n                  class=\"my-8 cbtn hidden-sm-and-down\"\r\n                  height=\"40\"\r\n                  width=\"250\"\r\n                >\r\n                  submit\r\n                </v-btn>\r\n                <!-- ________________________________sm and down_____________________________________ -->\r\n                <v-btn\r\n                  @click=\"backpage()\"\r\n                  class=\"hidden-md-and-up ma-2\"\r\n                  height=\"40\"\r\n                  width=\"250\"\r\n                  style=\"background-color: #d3d3d3\"\r\n                >\r\n                  back\r\n                </v-btn>\r\n                <v-btn\r\n                  @click=\"TestSlot()\"\r\n                  class=\"cbtn hidden-md-and-up ma-2\"\r\n                  height=\"40\"\r\n                  width=\"250\"\r\n                >\r\n                  submit\r\n                </v-btn>\r\n                <!-- ________________________________________________________________________________ -->\r\n              </v-container>\r\n            </v-col>\r\n          </v-col>\r\n        </v-container>\r\n      </v-row>\r\n    </v-app>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Swal from \"sweetalert2\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      Mixlist: [],\r\n      textinput: [],\r\n      textinputfix: [],\r\n      ListShow: [],\r\n      headers: [\r\n        {\r\n          text: \"Category\",\r\n          align: \"start\",\r\n          sortable: false,\r\n          value: \"Category\",\r\n        },\r\n        { text: \"PartNo\", value: \"PartNo\" },\r\n        { text: \"Value\", value: \"Value\" },\r\n        { text: \"quantity\", value: \"quantity\" },\r\n        { text: \"\", value: \"action\" },\r\n      ],\r\n      rules: [(value) => !!value || \"กรอกจำนวนให้ครบถ้วน.\"],\r\n    };\r\n  },\r\n  components: {},\r\n  mounted() {\r\n    let JsonData = JSON.parse(localStorage.getItem(\"Iteminlist\"));\r\n    this.ListShow = JsonData;\r\n  },\r\n  methods: {\r\n    TestSlot() {\r\n      this.textinputfix = this.textinput.filter(function (e) {\r\n        return e;\r\n      });\r\n      if (this.textinputfix.length == this.ListShow.length) {\r\n        for (let i = 0; i < this.textinputfix.length; i++) {\r\n          if (this.ListShow[i].qty >= this.textinputfix[i]) {\r\n            this.Mixlist[i] = this.ListShow[i].qty - this.textinputfix[i];\r\n          } else {\r\n            Swal.fire({\r\n              text: \"มีรายการสินค้าที่ไม่เพียงพอ ตรวจสอบจำนวนที่จะเบิก1\",\r\n              icon: \"warning\",\r\n              showConfirmButton: false,\r\n              timer: 2000,\r\n            });\r\n            break;\r\n          }\r\n        }\r\n        if (this.Mixlist.length == this.ListShow.length) {\r\n          Swal.fire({\r\n            title: \"ยืนยันรายการ\",\r\n            text: \"ต้องการที่จะเบิกตามรายการที่เลือก?\",\r\n            icon: \"warning\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#01ba03\",\r\n            cancelButtonColor: \"#d33\",\r\n            confirmButtonText: \"ตกลง\",\r\n            cancelButtonText: \"ยกเลิก\",\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              Swal.fire({\r\n                title: \"บันทึกสำเร็จ\",\r\n                icon: \"success\",\r\n                timer: 2000,\r\n                showConfirmButton: false,\r\n              });\r\n              for (let i = 0; i < this.textinputfix.length; i++) {\r\n                let id = this.ListShow[i].id;\r\n                let quantity = this.Mixlist[i];\r\n                this.axios\r\n                  .post(\"https://adventurous-shorts-cow.cyclic.app/updateqty\", { id , quantity })\r\n                  .then(() => {\r\n                    let Category = this.ListShow[i].id;\r\n                    let PartNo = this.ListShow[i].id;\r\n                    let Value = this.ListShow[i].id;\r\n                    let quantity = this.Mixlist[i];\r\n                    let user = localStorage.getItem(\"UserAdmin\")\r\n                    this.axios.post(\"https://adventurous-shorts-cow.cyclic.app/insertuser\" , \r\n                    {Category , PartNo , Value , quantity , user})\r\n                    .catch(function (error) {\r\n                    document.write(\r\n                      \"ส่งข้อมูลไม่สำเร็จ\" + \"<br>\" + \"สาเหตุ :\" + error\r\n                      );\r\n                    });\r\n                  })\r\n                  .catch(function (error) {\r\n                    document.write(\r\n                      \"ส่งข้อมูลไม่สำเร็จ\" + \"<br>\" + \"สาเหตุ :\" + error\r\n                    );\r\n                  });\r\n              }\r\n              Swal.fire({\r\n                      title: \"บันทึกสำเร็จ\",\r\n                      icon: \"success\",\r\n                      timer: 2000,\r\n                      showConfirmButton: false,\r\n                    });\r\n                    this.$router.push(\"/select\");\r\n            } else {\r\n              this.Mixlist = [];\r\n              console.log(this.Mixlist);\r\n            }\r\n          });\r\n        } else {\r\n          Swal.fire({\r\n            text: \"มีรายการสินค้าที่ไม่เพียงพอ ตรวจสอบจำนวนที่จะเบิก2\",\r\n            icon: \"warning\",\r\n            showConfirmButton: false,\r\n            timer: 2000,\r\n          });\r\n          console.log(this.Mixlist)\r\n          console.log(this.ListShow.length)\r\n        }\r\n      } else {\r\n        Swal.fire({\r\n          text: \"มีรายการที่ยังกรอกจำนวนไม่ครบ\",\r\n          icon: \"warning\",\r\n          showConfirmButton: false,\r\n          timer: 1800,\r\n        });\r\n      }\r\n      if (this.ListShow.length <= 0) {\r\n        Swal.fire({\r\n          text: \"ไม่มีข้อมูลทำการเลือกข้อมูลก่อน\",\r\n          icon: \"warning\",\r\n          showConfirmButton: false,\r\n          timer: 1800,\r\n        });\r\n        this.$router.push(\"/select\");\r\n      }\r\n      console.log(this.ListShow);\r\n    },\r\n    backpage() {\r\n      this.$router.push(\"/select\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cbtn {\r\n  background: rgb(210, 255, 67);\r\n  background: linear-gradient(\r\n    90deg,\r\n    rgba(210, 255, 67, 1) 0%,\r\n    rgba(137, 255, 113, 1) 44%,\r\n    rgba(84, 255, 233, 1) 92%\r\n  );\r\n}\r\n.cbm {\r\n  background: rgb(54, 54, 54);\r\n  background: linear-gradient(\r\n    90deg,\r\n    rgba(54, 54, 54, 1) 0%,\r\n    rgba(173, 173, 173, 1) 100%\r\n  );\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}